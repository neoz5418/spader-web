<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-legacy plugin-docs plugin-id-default docs-doc-id-inside-the-engine">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Inside the engine | Spader AI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://spader.ai/img/og_image.png"><meta data-rh="true" name="twitter:image" content="https://spader.ai/img/og_image.png"><meta data-rh="true" property="og:url" content="https://spader.ai/docs/legacy/inside-the-engine"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="23yIHmCD_xnJb_6e3s-w7M29Kydahk-d86ObMWOrvRg"><meta data-rh="true" name="docusaurus_version" content="legacy"><meta data-rh="true" name="docusaurus_tag" content="docs-default-legacy"><meta data-rh="true" name="docsearch:version" content="legacy"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-legacy"><meta data-rh="true" property="og:title" content="Inside the engine | Spader AI"><meta data-rh="true" name="description" content="This page explains in more detail how the crawler extracts content from your page, and how it ranks the results."><meta data-rh="true" property="og:description" content="This page explains in more detail how the crawler extracts content from your page, and how it ranks the results."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://spader.ai/docs/legacy/inside-the-engine"><link data-rh="true" rel="alternate" href="https://spader.ai/docs/legacy/inside-the-engine" hreflang="en"><link data-rh="true" rel="alternate" href="https://spader.ai/docs/legacy/inside-the-engine" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Spader AI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Spader AI Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ea1921ae.css">
<link rel="preload" href="/assets/js/runtime~main.49c42e1d.js" as="script">
<link rel="preload" href="/assets/js/main.2db5178f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like SpaderAI, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/spader-ai/spader-web">GitHub</a>! ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/inference">Spader Inference</a></li><li><a class="dropdown__link" href="/fine-tuning">Spader Fine-tuning</a></li><li><a class="dropdown__link" href="/gpu-clusters">Spader GPU Clusters</a></li><li><a class="dropdown__link" href="/custom-models">Spader Custom Models</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a><a class="navbar__item navbar__link" href="/contact">Contact</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/what-is-spader-ai">Docs</a><a href="https://github.com/spader-ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/legacy/dropdown">Adding DocSearch to your UI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/legacy/required-configuration">Requirements, tips, FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/legacy/inside-the-engine">Under the Hood</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/legacy/inside-the-engine">Inside the engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/legacy/config-file">Config Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/legacy/how-do-we-build-an-index">How do we build a DocSearch index?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/legacy/run-your-own">Run your own</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Spader AI<!-- --> <b>legacy</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/spader-ai-faq">latest version</a></b> (<!-- -->Next<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Under the Hood</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Inside the engine</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: legacy</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Inside the engine</h1></header><p>This page explains in more detail how the crawler extracts content from your page, and how it ranks the results.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crawling">Crawling<a href="#crawling" class="hash-link" aria-label="Direct link to Crawling" title="Direct link to Crawling">​</a></h2><p>Each crawl begins its journey at <code>start_urls</code> value specified in your config. It will read those pages, recursively extract and follow every link in those pages until it has browsed every compliant page.</p><p>If you have explicitly defined a <code>sitemap.xml</code>, our crawler will scrape every provided and compliant page. We recommend using <a href="https://www.sitemaps.org/" target="_blank" rel="noopener noreferrer">a sitemap</a> since it explicitly exposes URLs to crawl and avoid missing pages that aren&#x27;t linked from another page.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extracting-content">Extracting content<a href="#extracting-content" class="hash-link" aria-label="Direct link to Extracting content" title="Direct link to Extracting content">​</a></h2><p>Building records using the scraper is pretty intuitive. Based on your settings, we extract the payload of your web page and index it, preserving your data structure. It achieves this in a simple way:</p><ul><li>We <strong>read top down</strong> your web page following your HTML flow and pick out your matching elements according to their <strong>levels</strong> based on the <code>selectors_level</code> defined.</li><li>We create a record for each paragraph along with its hierarchical path. This construction is based on their <strong>time of appearance</strong> along the flow.</li><li>We <strong>index</strong> these records with the appropriate global settings (e.g. metadata, tags, etc.)</li></ul><p><em><strong>Note:</strong> The above process performs sanity tests as it scrapes to detect errors. If there are any serious warnings, it aborts and hence does not overwrite your current index. These checks ensure that your dedicated index isn&#x27;t flushed.</em></p><p>You can <a href="/docs/legacy/how-do-we-build-an-index">find more explanations in this dedicated section.</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ranking-records">Ranking records<a href="#ranking-records" class="hash-link" aria-label="Direct link to Ranking records" title="Direct link to Ranking records">​</a></h2><p>Spader always returns the most relevant results first, using a <a href="https://www.spader.com/doc/guides/ranking/ranking-formula/#tie-breaking-approach" target="_blank" rel="noopener noreferrer">tie-breaking approach</a>. DocSearch will first search for exact matches in your keywords, and then fallback to partial matches. It sorts those results, once again, on the page hierarchy, as extracted from the <code>selectors</code>.</p><p>The default strategy is to promote records having matching words in the highest level first. Thus if two results have the same matching words, the one having them in the highest level (<code>lvl0</code>) will be ranked higher. We also use the position of the matching words. The sooner they appear within the HTML flow, the higher the record will be ranked.</p><p>We base relevancy on several factors and customize it according to the Spader tie-breaking method.</p><p>You can boost pages depending on their URLs. You should use the <code>start_urls</code> and its <code>page_rank</code> attributes. Its value is a numeric value (defaults to 0). The higher the value is, the higher results from the matching pages are ranked. For example, all pages with a <code>page_rank</code> of 5 will be returned before pages with a <code>page_rank</code> of 1.</p><p>You could even change the relevancy strategy by <a href="https://www.spader.com/doc/guides/ranking/custom-ranking/" target="_blank" rel="noopener noreferrer">overwriting the default <code>customRanking</code></a> used by the index by using the <code>custom_settings</code> option of your config.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/spader-ai/spader-web/edit/main/packages/website/versioned_docs/version-legacy/inside-the-engine.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-10-12T13:18:02.000Z">Oct 12, 2024</time></b> by <b>liuf</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/legacy/integrations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Supported Integrations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/legacy/config-file"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Config Files</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#crawling" class="table-of-contents__link toc-highlight">Crawling</a></li><li><a href="#extracting-content" class="table-of-contents__link toc-highlight">Extracting content</a></li><li><a href="#ranking-records" class="table-of-contents__link toc-highlight">Ranking records</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/what-is-spader-ai">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/spader-ai-faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">DocSearch</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/apply">Apply</a></li><li class="footer__item"><a href="https://github.com/spader-ai/spader-web/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/xxxxx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/spader-ai/spader-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/xxxxx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/spader-logo-blue.png" alt="Spader AI" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="200"><img src="/img/spader-logo-white.png" alt="Spader AI" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="200"></div><div class="footer__copyright">Spader AI 2023-now • Designed and built by docusaurus</div></div></div></footer></div>
<script src="/assets/js/runtime~main.49c42e1d.js"></script>
<script src="/assets/js/main.2db5178f.js"></script>
</body>
</html>